<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Orapa Mine</title>
    <link rel="stylesheet" href="index.css">
    <script type="module" src="index.tsx"></script>
<link rel="stylesheet" href="/index.css">
</head>
<body>
    <div id="app">
        <!-- Main Menu Screen -->
        <div id="screen-main" class="screen screen-v-center">
            <div class="screen-content">
                <h1 class="title">Orapa Mine</h1>
                <div class="menu-buttons">
                    <button id="btn-start-game">Spiel starten</button>
                </div>
                <!-- Rules are now displayed directly on the main screen -->
                <div id="intro-rules"></div>
            </div>
        </div>

        <!-- Difficulty Select Screen -->
        <div id="screen-difficulty" class="screen screen-v-center hidden">
            <div class="screen-content">
                <h2 class="subtitle">Schwierigkeitsgrad</h2>
                <div id="difficulty-options" class="menu-buttons vertical">
                    <!-- Buttons are generated by UI script -->
                </div>
                 <button id="btn-back-to-main-1" class="btn-back">Zurück</button>
            </div>
        </div>
        
        <!-- Custom Level Creator Screen -->
        <div id="screen-custom-creator" class="screen hidden">
             <div class="screen-content custom-creator-layout">
                <h2 class="subtitle">Eigenes Level erstellen</h2>
                
                <div class="creator-main-content">
                    <div class="creator-config">
                        <h4>1. Farbe wählen</h4>
                        <div id="custom-color-selector" class="selector-grid"></div>
                        
                        <h4>2. Form wählen</h4>
                        <div id="custom-shape-selector" class="selector-grid"></div>
                        
                        <button id="btn-add-custom-gem" class="add-gem-button">Edelstein hinzufügen +</button>
                    </div>
                    
                    <div class="creator-preview">
                        <h4>Level-Set (deine Auswahl)</h4>
                        <div id="custom-gem-list"></div>
                        <div id="custom-validation-feedback"></div>
                    </div>
                </div>
                
                <div class="menu-buttons">
                    <button id="btn-start-custom-level" disabled>Level starten</button>
                    <button id="btn-back-to-difficulty" class="btn-back">Zurück</button>
                </div>
            </div>
        </div>

        <!-- End Screen -->
        <div id="screen-end" class="screen hidden">
            <div class="end-content-container">
                <h2 id="end-title" class="subtitle"></h2>
                <h3 id="end-rating"></h3>
                <p id="end-stats"></p>
                <p id="end-retry-message"></p>
                <div id="end-solution-wrapper">
                    <p id="end-solution-label">Korrekte Lösung:</p>
                    <canvas id="end-solution-canvas"></canvas>
                </div>
                <div id="end-rating-legend"></div>
            </div>
            <div class="menu-buttons">
                <button id="btn-new-level">Neues Level</button>
                <button id="btn-menu">Menü</button>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="screen-game" class="screen hidden">
            <main id="game-container">
                <div id="game-board-wrapper">
                    <canvas id="gem-canvas" tabindex="0"></canvas>
                    <canvas id="path-overlay"></canvas>
                </div>
            </main>
            <footer id="controls-container">
                <div id="tab-buttons">
                    <button id="actions-tab-btn" class="tab-btn active" aria-controls="actions-panel">Aktionen</button>
                    <button id="log-tab-btn" class="tab-btn" aria-controls="log-panel">Logbuch</button>
                    <button id="rules-tab-btn" class="tab-btn" aria-controls="rules-panel">Regeln</button>
                </div>
                <div id="tab-panels">
                    <div id="actions-panel" class="tab-panel active">
                        <div class="actions-content-wrapper">
                            <div id="gem-toolbar-wrapper">
                                <span>Verfügbare Edelsteine:</span>
                                <div id="gem-toolbar"></div>
                            </div>
                            <div class="preview-toggle-wrapper">
                                <label for="preview-toggle">Aktuellen Lichtweg anzeigen (F)</label>
                                <input type="checkbox" id="preview-toggle">
                            </div>
                            <div id="action-buttons">
                                <button id="check-solution-btn">Lösung einreichen</button>
                                <button id="give-up-btn">Aufgeben</button>
                            </div>
                        </div>
                    </div>
                    <div id="log-panel" class="tab-panel">
                        <ul id="log-list"></ul>
                    </div>
                    <div id="rules-panel" class="tab-panel">
                        <!-- Content generated by UI script -->
                    </div>
                </div>
            </footer>
        </div>
        
    </div>
<script type="module" src="/index.tsx"></script>
</body>
</html>